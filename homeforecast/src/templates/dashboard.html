<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HomeForecast - Smart Thermal Forecasting</title>
    <link rel="stylesheet" href="/static/css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <div>
                <h1>HomeForecast</h1>
                <div class="subtitle">Smart Thermal Forecasting for Your Home</div>
            </div>
            <div>
                <button id="updateBtn" class="btn">
                    <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z"/>
                    </svg>
                    Update Now
                </button>

            </div>
        </div>
        
        <!-- Status Overview -->
        <div class="grid">
            <div class="card">
                <h2>
                    <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                    </svg>
                    System Status
                </h2>
                <div class="metric">
                    <span class="metric-label">Status:</span>
                    <span class="status status-ok" id="status">Loading...</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Last Update:</span>
                    <span class="metric-value" id="lastUpdate">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Current Indoor Temp:</span>
                    <span class="metric-value large" id="currentTemp">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Model Convergence:</span>
                    <span class="metric-value" id="modelConvergence">-</span>
                </div>
            </div>
            
            <div class="card">
                <h2>
                    <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"/>
                    </svg>
                    Thermal Model
                </h2>
                <div class="metric">
                    <span class="metric-label">Time Constant:</span>
                    <span class="metric-value" id="timeConstant">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Heating Rate:</span>
                    <span class="metric-value" id="heatingRate">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Cooling Rate:</span>
                    <span class="metric-value" id="coolingRate">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Model Error (MAE):</span>
                    <span class="metric-value" id="modelError">-</span>
                </div>
            </div>
            
            <div class="card">
                <h2>
                    <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                    </svg>
                    Climate Action Insights
                </h2>
                <div class="metric">
                    <span class="metric-label">Recommended Action:</span>
                    <span class="metric-value large action-status" id="recommendedAction">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Next Climate On Time:</span>
                    <span class="metric-value" id="nextActionTime">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Climate Action Off Time:</span>
                    <span class="metric-value" id="actionOffTime">-</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Estimated Run Time:</span>
                    <span class="metric-value" id="estimatedRuntime">-</span>
                </div>
            </div>
        </div>

        <!-- Tabs for different views -->
        <div class="tabs">
            <button class="tab active" data-tab="forecast">Forecast</button>
            <button class="tab" data-tab="analysis">Analysis</button>
            <button class="tab" data-tab="v2training">V2.0 Training</button>
            <button class="tab" data-tab="settings">Settings</button>
            <button class="tab" data-tab="debug">Debug</button>
        </div>

        <!-- Forecast Tab -->
        <div id="forecastTab" class="tab-content active">
            <div class="card">
                <h2>Temperature Forecast</h2>
                <div class="chart-container">
                    <canvas id="forecastChart"></canvas>
                </div>
            </div>
            
            <div class="card">
                <h2>Recommendations</h2>
                <div class="recommendations" id="recommendations">
                    <div class="recommendation">Loading recommendations...</div>
                </div>
            </div>
        </div>

        <!-- Analysis Tab -->
        <div id="analysisTab" class="tab-content">
            <!-- Comfort Analysis Section -->
            <div class="grid grid-2">
                <div class="card">
                    <h2>
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 1 1 0 000 2H4a1 1 0 00-1 1v6a1 1 0 001 1h1a1 1 0 100 2H4a2 2 0 01-2-2V5zm12 0a2 2 0 00-2-2 1 1 0 100 2h2a1 1 0 011 1v6a1 1 0 01-1 1h-1a1 1 0 100 2h1a2 2 0 002-2V5z" clip-rule="evenodd"/>
                        </svg>
                        Detailed Comfort Analysis
                    </h2>
                    <div class="metric">
                        <span class="metric-label">Recommended Mode:</span>
                        <span class="metric-value large" id="recommendedMode">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Time to Upper Limit:</span>
                        <span class="metric-value" id="timeToUpper">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Time to Lower Limit:</span>
                        <span class="metric-value" id="timeToLower">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Comfort Score:</span>
                        <span class="metric-value" id="comfortScore">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Current Setpoint:</span>
                        <span class="metric-value" id="currentSetpoint">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">HVAC Mode:</span>
                        <span class="metric-value" id="hvacMode">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">HVAC Action:</span>
                        <span class="metric-value" id="hvacAction">-</span>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Energy Efficiency</h2>
                    <div class="metric">
                        <span class="metric-label">Efficiency Score:</span>
                        <span class="metric-value large" id="efficiencyScore">-</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill efficiency-progress" style="width: 0%"></div>
                    </div>
                    <div class="chart-container small">
                        <canvas id="energyChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Configuration Section -->
            <div class="grid grid-2">
                <div class="card">
                    <h2>Thermostat Configuration</h2>
                    <div class="metric">
                        <span class="metric-label">Comfort Range:</span>
                        <span class="metric-value">
                            <span id="comfortMin">-</span> - <span id="comfortMax">-</span>
                        </span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ML Correction:</span>
                        <span class="metric-value" id="mlEnabled">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Smart HVAC Control:</span>
                        <span class="metric-value" id="smartHvacEnabled">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Update Interval:</span>
                        <span class="metric-value" id="updateInterval">-</span>
                    </div>
                </div>

                <div class="card">
                    <h2>ML Model Performance</h2>
                    <div class="metric">
                        <span class="metric-label">ML Model Status:</span>
                        <span class="metric-value" id="mlStatus">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ML Accuracy (R²):</span>
                        <span class="metric-value" id="mlAccuracy">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Training Data Points:</span>
                        <span class="metric-value" id="trainingDataPoints">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Last Model Update:</span>
                        <span class="metric-value" id="lastModelUpdate">-</span>
                    </div>
                    
                    <button class="btn btn-primary" onclick="dashboard.showMLTrainingDialog()" style="margin-top: 15px;">
                        <svg class="icon" style="margin-right: 5px;" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                        </svg>
                        Train ML Model
                    </button>
                </div>
            </div>
        </div>

        <!-- V2.0 Training Tab -->
        <div id="v2trainingTab" class="tab-content">
            <!-- RC Model Accuracy Overview -->
            <div class="grid">
                <div class="card">
                    <h2>
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        RC Model Accuracy
                    </h2>
                    <div class="metric">
                        <span class="metric-label">Current Accuracy:</span>
                        <span class="metric-value large" id="rcModelAccuracy">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Physics Compliance:</span>
                        <span class="metric-value" id="physicsCompliance">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Training Status:</span>
                        <span class="status" id="v2TrainingStatus">Ready</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Building Model:</span>
                        <span class="metric-value" id="loadedBuildingModel">None</span>
                    </div>
                </div>

                <div class="card">
                    <h2>
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                        </svg>
                        Comfort Band Training
                    </h2>
                    <div class="metric">
                        <label for="comfortMin">Minimum Comfort (°F):</label>
                        <input type="number" id="comfortMin" value="68" min="60" max="80" step="0.5" class="comfort-input">
                    </div>
                    <div class="metric">
                        <label for="comfortMax">Maximum Comfort (°F):</label>
                        <input type="number" id="comfortMax" value="76" min="65" max="85" step="0.5" class="comfort-input">
                    </div>
                    <div class="metric">
                        <span class="metric-label">Current Band:</span>
                        <span class="metric-value" id="currentComfortBand">68.0°F - 76.0°F</span>
                    </div>
                </div>
            </div>

            <!-- File Upload Section -->
            <div class="grid">
                <div class="card">
                    <h2>
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"/>
                        </svg>
                        DOE Building Model
                    </h2>
                    <div class="upload-zone" id="idfUploadZone" onclick="document.getElementById('idfFileInput').click()">
                        <div class="upload-content">
                            <svg class="upload-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"/>
                            </svg>
                            <div class="upload-text">
                                <strong>Drop IDF file or click to browse</strong>
                                <p>DOE Residential Prototype Building Models</p>
                            </div>
                        </div>
                        <input type="file" id="idfFileInput" accept=".idf" style="display: none;">
                    </div>
                    <div id="idfModelInfo" class="model-info" style="display: none;"></div>
                </div>

                <div class="card">
                    <h2>
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                        </svg>
                        EPW Weather Dataset
                    </h2>
                    <div class="upload-zone" id="epwUploadZone" onclick="document.getElementById('epwFileInput').click()">
                        <div class="upload-content">
                            <svg class="upload-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z"/>
                            </svg>
                            <div class="upload-text">
                                <strong>Drop EPW file or click to browse</strong>
                                <p>EnergyPlus Weather Files</p>
                            </div>
                        </div>
                        <input type="file" id="epwFileInput" accept=".epw" style="display: none;">
                    </div>
                    <div class="metric" style="margin-top: 10px;">
                        <label for="epwLimitHours">Limit Hours (optional):</label>
                        <input type="number" id="epwLimitHours" placeholder="e.g., 168 for 1 week" min="1" max="8760" class="comfort-input">
                    </div>
                    <div id="epwWeatherInfo" class="model-info" style="display: none;"></div>
                </div>
            </div>

            <!-- Training Section -->
            <div class="card">
                <h2>
                    <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                    </svg>
                    Enhanced RC Model Training
                </h2>
                
                <!-- Model Status Section (shown when model is trained) -->
                <div id="modelStatusSection" class="model-status" style="display: none;">
                    <div class="status-header">
                        <h3>✅ Enhanced Model Status</h3>
                        <div class="model-info-summary">
                            <div class="info-item">
                                <span class="info-label">Accuracy:</span>
                                <span class="info-value" id="currentModelAccuracy">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Training Samples:</span>
                                <span class="info-value" id="currentModelSamples">-</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Trained:</span>
                                <span class="info-value" id="currentModelTimestamp">-</span>
                            </div>
                        </div>
                    </div>
                    <div class="retrain-controls">
                        <button id="retrainModelBtn" class="btn btn-secondary" onclick="showRetrainOptions()">
                            <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
                            </svg>
                            Retrain Model
                        </button>
                    </div>
                </div>
                
                <!-- Training Controls Section (shown when no model or retraining) -->
                <div id="trainingControlsSection" class="training-controls">
                    <div class="grid" style="margin-bottom: 20px;">
                        <div class="metric">
                            <label for="trainingDurationV2">Training Duration (hours):</label>
                            <input type="number" id="trainingDurationV2" value="168" min="24" max="8760" class="comfort-input">
                            <small>168 hours = 1 week, 720 hours = 1 month, 8760 hours = 1 year</small>
                        </div>
                        <div class="metric">
                            <label>HVAC Scenarios:</label>
                            <div class="scenario-checkboxes">
                                <label><input type="checkbox" value="heating" checked> Heating</label>
                                <label><input type="checkbox" value="cooling" checked> Cooling</label>
                                <label><input type="checkbox" value="off" checked> HVAC Off</label>
                                <label><input type="checkbox" value="mixed" checked> Mixed Mode</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="training-actions">
                        <button id="startV2TrainingBtn" class="btn btn-primary" onclick="startV2Training()" disabled>
                            <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M8 5v10l7-5-7-5z"/>
                            </svg>
                            <span id="trainingButtonText">Start Enhanced Training</span>
                        </button>
                        <button id="cancelRetrainBtn" class="btn btn-secondary" onclick="cancelRetrain()" style="display: none;">
                            Cancel
                        </button>
                    </div>
                </div>

                <!-- Training Progress -->
                <div id="trainingProgressSection" class="training-progress" style="display: none;">
                    <div class="progress-header">
                        <h3>Training Progress</h3>
                        <span id="trainingProgressText">Initializing...</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="trainingProgressBar" style="width: 0%;"></div>
                        </div>
                        <div class="progress-percentage" id="trainingProgressPercent">0%</div>
                    </div>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <span class="stat-label">Processing:</span>
                            <span class="stat-value" id="currentProcessingFile">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Samples Generated:</span>
                            <span class="stat-value" id="samplesGenerated">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Physics Violations:</span>
                            <span class="stat-value" id="physicsViolations">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Estimated Completion:</span>
                            <span class="stat-value" id="estimatedCompletion">-</span>
                        </div>
                    </div>
                </div>

                <!-- Training Results -->
                <div id="trainingResultsSection" class="training-results" style="display: none;">
                    <h3>Training Results</h3>
                    <div class="grid">
                        <div class="metric">
                            <span class="metric-label">Final Accuracy:</span>
                            <span class="metric-value large" id="finalAccuracy">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Physics Compliance:</span>
                            <span class="metric-value" id="finalPhysicsCompliance">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Training Samples:</span>
                            <span class="metric-value" id="finalTrainingSamples">-</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">Model Improvement:</span>
                            <span class="metric-value" id="modelImprovement">-</span>
                        </div>
                    </div>
                    <button id="applyModelBtn" class="btn btn-success" onclick="applyEnhancedModel()" style="margin-top: 15px;">
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        Apply Enhanced Model to RC System
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settingsTab" class="tab-content">
            <div class="card">
                <h2>Configuration</h2>
                <p>Settings are managed through the Home Assistant addon configuration page.</p>
                <a href="/homeassistant/hassio/addon/homeforecast/config" class="btn">Open Addon Configuration</a>
            </div>
        </div>

        <!-- Debug Tab -->
        <div id="debugTab" class="tab-content">
            <div class="grid">
                <div class="card">
                    <h2>Database Statistics</h2>
                    <div class="metric">
                        <span class="metric-label">Total Measurements:</span>
                        <span class="metric-value" id="measurementCount">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Total Forecasts:</span>
                        <span class="metric-value" id="forecastCount">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Data History:</span>
                        <span class="metric-value" id="dataAge">-</span>
                    </div>
                </div>
                
                <div class="card">
                    <h2>System Information</h2>
                    <div class="metric">
                        <span class="metric-label">Addon Version:</span>
                        <span class="metric-value" id="addonVersion">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Python Version:</span>
                        <span class="metric-value" id="pythonVersion">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Timezone:</span>
                        <span class="metric-value" id="systemTimezone">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Current Local Time:</span>
                        <span class="metric-value" id="currentLocalTime">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Log Level:</span>
                        <span class="metric-value" id="logLevel">-</span>
                    </div>
                </div>
                
                <div class="card">
                    <h2>Actions</h2>
                    <button class="btn btn-secondary" onclick="window.open('/logs')">
                        View Logs
                    </button>
                    <button class="btn btn-secondary" onclick="dashboard.exportData()">
                        Export Data
                    </button>
                    <button class="btn btn-danger" onclick="dashboard.resetModel()" style="margin-top: 10px;">
                        Reset Model & Data
                    </button>
                    <p style="font-size: 12px; color: #666; margin-top: 5px;">
                        This will clear all historical data and restart model training
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ML Training Confirmation Dialog -->
    <div id="mlTrainingModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Train Machine Learning Model</h3>
                <span class="close" onclick="dashboard.hideMLTrainingDialog()">&times;</span>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to train the Machine Learning model?</p>
                
                <div class="training-info">
                    <div class="info-row">
                        <strong>Model Type:</strong> <span id="modalModelType">-</span>
                    </div>
                    <div class="info-row">
                        <strong>Training Data Points:</strong> <span id="modalDataPoints">-</span>
                    </div>
                    <div class="info-row">
                        <strong>Training Period:</strong> <span id="modalTrainingPeriod">-</span>
                    </div>
                    <div class="info-row">
                        <strong>Estimated Duration:</strong> <span id="modalEstimatedDuration">-</span>
                    </div>
                </div>
                
                <div class="warning-box">
                    <strong>⚠️ Note:</strong> Training will temporarily use system resources and may take several seconds to complete.
                    The model will be automatically saved after successful training.
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="dashboard.hideMLTrainingDialog()">Cancel</button>
                <button class="btn btn-primary" onclick="dashboard.confirmMLTraining()" id="confirmTrainBtn">
                    <span class="btn-text">Start Training</span>
                    <span class="spinner" style="display: none;">Training...</span>
                </button>
            </div>
        </div>
    </div>
    
    <script src="/static/js/dashboard.js"></script>
</body>
</html>